// Translations for all text keys
const translations = {
  en: {
    nav_residential: 'Residential',
    nav_commercial: 'Commercial',
    nav_sustainability: 'Waste-type',
    nav_about: 'About Us',
    nav_support: 'Support',
    nav_login: 'Log In',
    login_title: 'Log In',
    login_email: 'Email',
    login_password: 'Password',
    login_submit: 'Log In',
    login_signup: 'Sign Up',
    login_forgot: 'Forgot Password?',
    signup_title: 'Sign Up',
    signup_name: 'Name',
    signup_email: 'Email',
    signup_password: 'Password',
    signup_submit: 'Sign Up',
    forgot_title: 'Forgot Password',
    forgot_email: 'Email',
    forgot_submit: 'Send Reset Link',
    ai_help_title: 'AI Help Support',
    hero_title: 'Help Your Business Become More Sustainable',
    hero_subtitle: "Cleaner partners with small businesses to make their sustainability goals a reality. Take the first step towards a more sustainable business with a limited time promotion.",
    hero_cta: 'Know about the tpyes of waste',
    service_residential_title: 'Residential Waste Pickup',
    service_residential_desc: "Cleaner's curbside trash and recycling pickup is the best choice for your home, and for the environment.",
    service_residential_link: 'Get Residential Waste Service',
    service_commercial_title: 'Commercial Waste Pickup',
    service_commercial_desc: "Cleaner's business trash and recycling pickup is the best choice for your organization, and for the environment.",
    service_commercial_link: 'Get Commercial Waste Service',
    service_dumpster_title: 'Roll-Off Dumpster Rental',
    service_dumpster_desc: "From quick cleanouts to major renovations, Cleaner has a dumpster that's perfect for your project.",
    service_dumpster_link: 'Rent a Roll-Off Dumpster',
    quick_access_title: 'My Cleaner & More',
    quick_access_desc: 'Quick access to My Cleaner and other popular services.',
    quick_access_payment: 'Make a Payment',
    quick_access_paperless: 'Paperless Billing',
    quick_access_autopay: 'Enroll in AutoPay',
    quick_access_schedule: 'Pickup Schedule',
    footer_products: 'Products & Services',
    footer_residential: 'Residential Trash Collection & Recycling',
    footer_commercial: 'Commercial Waste Disposal & Recycling',
    footer_dumpster: 'Roll-Off Dumpster Rental',
    footer_support: 'Customer Support',
    footer_paybill: 'Pay My Bill',
    footer_billing: 'Billing & Invoice Help',
    footer_account: 'Manage My Account',
    footer_info: 'Quick Info',
    footer_recycling: 'Recycling 101',
    footer_areas: 'Our Service Areas',
    footer_dropoff: 'Drop-Off Locations',
    footer_company: 'Our Company',
    footer_who: 'Who We Are',
    footer_why: 'Why Cleaner?',
    footer_media: 'Media Room',
    footer_privacy: 'US Privacy Policy Update Effective November 15, 2024',
  },
  hi: {
    nav_residential: 'आवासीय',
    nav_commercial: 'व्यावसायिक',
    nav_sustainability: 'स्थिरता और पुनर्चक्रण',
    nav_about: 'हमारे बारे में',
    nav_support: 'सहायता',
    nav_login: 'लॉग इन',
    login_title: 'लॉग इन',
    login_email: 'ईमेल',
    login_password: 'पासवर्ड',
    login_submit: 'लॉग इन',
    login_signup: 'साइन अप',
    login_forgot: 'पासवर्ड भूल गए?',
    signup_title: 'साइन अप',
    signup_name: 'नाम',
    signup_email: 'ईमेल',
    signup_password: 'पासवर्ड',
    signup_submit: 'साइन अप',
    forgot_title: 'पासवर्ड भूल गए',
    forgot_email: 'ईमेल',
    forgot_submit: 'रीसेट लिंक भेजें',
    ai_help_title: 'एआई सहायता',
    hero_title: 'अपने व्यवसाय को अधिक टिकाऊ बनाएं',
    hero_subtitle: 'WM छोटे व्यवसायों के साथ साझेदारी करता है ताकि उनके स्थिरता लक्ष्यों को वास्तविकता बनाया जा सके। सीमित समय के प्रचार के साथ अधिक टिकाऊ व्यवसाय की ओर पहला कदम उठाएं।',
    hero_cta: 'अपनी स्थिरता यात्रा शुरू करें',
    service_residential_title: 'आवासीय कचरा पिकअप',
    service_residential_desc: 'WM की कर्बसाइड कचरा और पुनर्चक्रण पिकअप आपके घर और पर्यावरण के लिए सबसे अच्छा विकल्प है।',
    service_residential_link: 'आवासीय कचरा सेवा प्राप्त करें',
    service_commercial_title: 'व्यावसायिक कचरा पिकअप',
    service_commercial_desc: 'WM की व्यापारिक कचरा और पुनर्चक्रण पिकअप आपके संगठन और पर्यावरण के लिए सबसे अच्छा विकल्प है।',
    service_commercial_link: 'व्यावसायिक कचरा सेवा प्राप्त करें',
    service_dumpster_title: 'रोल-ऑफ डंपस्टर किराया',
    service_dumpster_desc: 'त्वरित सफाई से लेकर प्रमुख नवीनीकरण तक, WM के पास आपके प्रोजेक्ट के लिए उपयुक्त डंपस्टर है।',
    service_dumpster_link: 'रोल-ऑफ डंपस्टर किराए पर लें',
    quick_access_title: 'माई WM और अधिक',
    quick_access_desc: 'माई WM और अन्य लोकप्रिय सेवाओं तक त्वरित पहुँच।',
    quick_access_payment: 'भुगतान करें',
    quick_access_paperless: 'पेपरलेस बिलिंग',
    quick_access_autopay: 'ऑटो पे में नामांकन करें',
    quick_access_schedule: 'पिकअप शेड्यूल',
    footer_products: 'उत्पाद और सेवाएँ',
    footer_residential: 'आवासीय कचरा संग्रहण और पुनर्चक्रण',
    footer_commercial: 'व्यावसायिक कचरा निपटान और पुनर्चक्रण',
    footer_dumpster: 'रोल-ऑफ डंपस्टर किराया',
    footer_support: 'ग्राहक सहायता',
    footer_paybill: 'मेरा बिल चुकाएं',
    footer_billing: 'बिलिंग और इनवॉइस सहायता',
    footer_account: 'मेरा खाता प्रबंधित करें',
    footer_info: 'त्वरित जानकारी',
    footer_recycling: 'रिसाइक्लिंग 101',
    footer_areas: 'हमारे सेवा क्षेत्र',
    footer_dropoff: 'ड्रॉप-ऑफ स्थान',
    footer_company: 'हमारी कंपनी',
    footer_who: 'हम कौन हैं',
    footer_why: 'क्यों WM?',
    footer_media: 'मीडिया रूम',
    footer_privacy: 'यूएस गोपनीयता नीति अपडेट प्रभावी 15 नवंबर, 2024',
  },
  bn: {
    nav_residential: 'আবাসিক',
    nav_commercial: 'বাণিজ্যিক',
    nav_sustainability: 'টেকসই ও পুনর্ব্যবহার',
    nav_about: 'আমাদের সম্পর্কে',
    nav_support: 'সহায়তা',
    nav_login: 'লগ ইন',
    login_title: 'লগ ইন',
    login_email: 'ইমেইল',
    login_password: 'পাসওয়ার্ড',
    login_submit: 'লগ ইন',
    login_signup: 'সাইন আপ',
    login_forgot: 'পাসওয়ার্ড ভুলে গেছেন?',
    signup_title: 'সাইন আপ',
    signup_name: 'নাম',
    signup_email: 'ইমেইল',
    signup_password: 'পাসওয়ার্ড',
    signup_submit: 'সাইন আপ',
    forgot_title: 'পাসওয়ার্ড ভুলে গেছেন',
    forgot_email: 'ইমেইল',
    forgot_submit: 'রিসেট লিঙ্ক পাঠান',
    ai_help_title: 'এআই সহায়তা',
    hero_title: 'আপনার ব্যবসাকে আরও টেকসই করুন',
    hero_subtitle: 'WM ছোট ব্যবসার সাথে অংশীদারিত্ব করে তাদের টেকসই লক্ষ্য বাস্তবায়নে সহায়তা করে। সীমিত সময়ের প্রচারের সাথে আরও টেকসই ব্যবসার দিকে প্রথম পদক্ষেপ নিন।',
    hero_cta: 'আপনার টেকসই যাত্রা শুরু করুন',
    service_residential_title: 'আবাসিক বর্জ্য সংগ্রহ',
    service_residential_desc: 'WM-এর কার্বসাইড বর্জ্য ও পুনর্ব্যবহার সংগ্রহ আপনার বাড়ি ও পরিবেশের জন্য সেরা পছন্দ।',
    service_residential_link: 'আবাসিক বর্জ্য পরিষেবা নিন',
    service_commercial_title: 'বাণিজ্যিক বর্জ্য সংগ্রহ',
    service_commercial_desc: 'WM-এর ব্যবসায়িক বর্জ্য ও পুনর্ব্যবহার সংগ্রহ আপনার প্রতিষ্ঠানের ও পরিবেশের জন্য সেরা পছন্দ।',
    service_commercial_link: 'বাণিজ্যিক বর্জ্য পরিষেবা নিন',
    service_dumpster_title: 'রোল-অফ ডাম্পস্টার ভাড়া',
    service_dumpster_desc: 'দ্রুত পরিষ্কার থেকে বড় সংস্কার পর্যন্ত, WM-এর কাছে আপনার প্রকল্পের জন্য উপযুক্ত ডাম্পস্টার আছে।',
    service_dumpster_link: 'রোল-অফ ডাম্পস্টার ভাড়া নিন',
    quick_access_title: 'আমার WM ও আরও',
    quick_access_desc: 'আমার WM ও অন্যান্য জনপ্রিয় পরিষেবায় দ্রুত প্রবেশাধিকার।',
    quick_access_payment: 'পেমেন্ট করুন',
    quick_access_paperless: 'পেপারলেস বিলিং',
    quick_access_autopay: 'অটোপে-তে নাম লেখান',
    quick_access_schedule: 'পিকআপ সময়সূচী',
    footer_products: 'পণ্য ও পরিষেবা',
    footer_residential: 'আবাসিক বর্জ্য সংগ্রহ ও পুনর্ব্যবহার',
    footer_commercial: 'বাণিজ্যিক বর্জ্য নিষ্পত্তি ও পুনর্ব্যবহার',
    footer_dumpster: 'রোল-অফ ডাম্পস্টার ভাড়া',
    footer_support: 'গ্রাহক সহায়তা',
    footer_paybill: 'আমার বিল পরিশোধ করুন',
    footer_billing: 'বিলিং ও ইনভয়েস সহায়তা',
    footer_account: 'আমার অ্যাকাউন্ট পরিচালনা করুন',
    footer_info: 'দ্রুত তথ্য',
    footer_recycling: 'রিসাইক্লিং ১০১',
    footer_areas: 'আমাদের পরিষেবা এলাকা',
    footer_dropoff: 'ড্রপ-অফ অবস্থান',
    footer_company: 'আমাদের কোম্পানি',
    footer_who: 'আমরা কারা',
    footer_why: 'কেন WM?',
    footer_media: 'মিডিয়া রুম',
    footer_privacy: 'মার্কিন গোপনীয়তা নীতি আপডেট কার্যকর ১৫ নভেম্বর, ২০২৪',
  }
};

function setLanguage(lang) {
  const dict = translations[lang] || translations.en;
  document.querySelectorAll('[data-key]').forEach(el => {
    const key = el.getAttribute('data-key');
    if (dict[key]) el.textContent = dict[key];
  });
}

document.getElementById('language-select').addEventListener('change', function(e) {
  setLanguage(e.target.value);
});

// On page load, set default language
setLanguage(document.getElementById('language-select').value);

// Section reveal animation
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.15 });

document.querySelectorAll('.section').forEach(section => {
  observer.observe(section);
});

// Mobile menu toggle
const menuToggle = document.querySelector('.menu-toggle');
const nav = document.querySelector('.nav');
menuToggle.addEventListener('click', () => {
  nav.classList.toggle('open');
});
// Close menu on nav link click (mobile)
document.querySelectorAll('.nav a').forEach(link => {
  link.addEventListener('click', () => {
    nav.classList.remove('open');
  });
});

// Login Modal Logic
const loginBtn = document.getElementById('login-btn');
const loginModal = document.getElementById('login-modal');
const closeLogin = document.getElementById('close-login');

loginBtn.addEventListener('click', (e) => {
  e.preventDefault();
  loginModal.style.display = 'flex';
});
closeLogin.addEventListener('click', () => {
  loginModal.style.display = 'none';
});
window.addEventListener('click', (e) => {
  if (e.target === loginModal) loginModal.style.display = 'none';
});
document.querySelector('.login-form').addEventListener('submit', (e) => {
  e.preventDefault();
  loginModal.style.display = 'none';
  alert('Login submitted! (Demo only)');
});




// Signup & Forgot Password Modal Logic
const signupLink = document.getElementById('signup-link');
const forgotLink = document.getElementById('forgot-link');
const signupModal = document.getElementById('signup-modal');
const forgotModal = document.getElementById('forgot-modal');
const closeSignup = document.getElementById('close-signup');
const closeForgot = document.getElementById('close-forgot');

signupLink.addEventListener('click', (e) => {
  e.preventDefault();
  loginModal.style.display = 'none';
  signupModal.style.display = 'flex';
});
forgotLink.addEventListener('click', (e) => {
  e.preventDefault();
  loginModal.style.display = 'none';
  forgotModal.style.display = 'flex';
});
closeSignup.addEventListener('click', () => {
  signupModal.style.display = 'none';
});
closeForgot.addEventListener('click', () => {
  forgotModal.style.display = 'none';
});
window.addEventListener('click', (e) => {
  if (e.target === signupModal) signupModal.style.display = 'none';
  if (e.target === forgotModal) forgotModal.style.display = 'none';
});
document.querySelector('.signup-form').addEventListener('submit', (e) => {
  e.preventDefault();
  signupModal.style.display = 'none';
  alert('Sign up submitted! (Demo only)');
});
document.querySelector('.forgot-form').addEventListener('submit', (e) => {
  e.preventDefault();
  forgotModal.style.display = 'none';
  alert('Password reset link sent! (Demo only)');
}); 




/*chat bot*/

// Gemini API configuration
const API_KEY = 'AIzaSyB-KM1ahcCl-iynHcAS8mqZGqsV8s42hNg';
const API_URL = 'https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent';

// DOM elements
const chatMessages = document.getElementById('ai-chat-messages');
const userInput = document.getElementById('ai-chat-input');
const chatForm = document.getElementById('ai-chat-form');
const openBtn = document.getElementById('ai-help-btn');
const closeBtn = document.getElementById('close-ai-chat');
const modal = document.getElementById('ai-chat-modal');

// Show/hide modal
openBtn.addEventListener('click', () => {
  modal.style.display = 'block';
});
closeBtn.addEventListener('click', () => {
  modal.style.display = 'none';
});

// Function to add a message to the chat
function addMessage(content, isUser) {
  const messageDiv = document.createElement('div');
  messageDiv.classList.add('message');
  messageDiv.classList.add(isUser ? 'user-message' : 'bot-message');
  messageDiv.textContent = content;
  chatMessages.appendChild(messageDiv);
  chatMessages.scrollTop = chatMessages.scrollHeight;
  return messageDiv;
}

// Function to show loading state
function showLoading() {
  const loadingDiv = document.createElement('div');
  loadingDiv.classList.add('message', 'bot-message', 'loading');
  loadingDiv.textContent = 'Generating...';
  chatMessages.appendChild(loadingDiv);
  chatMessages.scrollTop = chatMessages.scrollHeight;
  return loadingDiv;
}

// Function to send message to Gemini API
async function sendToGemini(message) {
  const response = await fetch(`${API_URL}?key=${API_KEY}`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      contents: [
        {
          parts: [{ text: message }],
        },
      ],
    }),
  });

  if (!response.ok) {
    const errorData = await response.json();
    throw new Error(errorData.error?.message || 'API request failed');
  }

  const data = await response.json();
  return data.candidates?.[0]?.content?.parts?.[0]?.text || 'No response.';
}

// Handle chat form submission
chatForm.addEventListener('submit', async (e) => {
  e.preventDefault();
  const message = userInput.value.trim();
  if (!message) return;

  userInput.disabled = true;

  addMessage(message, true);
  const loadingMessage = showLoading();
  userInput.value = '';

  try {
    const response = await sendToGemini(message);
    chatMessages.removeChild(loadingMessage);
    addMessage(response, false);
  } catch (error) {
    chatMessages.removeChild(loadingMessage);
    addMessage(`Error: ${error.message}`, false);
  } finally {
    userInput.disabled = false;
    userInput.focus();
  }
});

// Optional: Animate modal on load using GSAP
gsap.from(".modal-content", {
  y: -300,
  opacity: 0,
  duration: 1,
  ease: "power2.out"
});

// Initial AI greeting
addMessage('Hello! I am Cleaner. How can I help you today?', false);

